<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Sitio ecommerce GarageOnline con catálogo, carrito y perfil" />
  <title>GarageOnline - Venta de Vehículos</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Font Awesome 6 CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />

  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- Leaflet (mapa) CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header role="banner" class="position-relative">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" aria-label="Menú principal">
      <div class="container-fluid">
        <a class="navbar-brand d-flex align-items-center fw-bold" href="#inicio">
          <i class="fas fa-car me-2"></i> GarageOnline
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Alternar navegación"
        ><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item"><a class="nav-link" href="#inicio">Inicio</a></li>
            <li class="nav-item"><a class="nav-link" href="#vehiculos">Vehículos</a></li>
            <li class="nav-item"><a class="nav-link" href="#perfil">Perfil</a></li>
            <li class="nav-item"><a class="nav-link" href="#contacto">Contacto</a></li>
          </ul>
          <form class="d-flex" role="search" aria-label="Buscar vehículos">
            <input type="text" id="searchInput" class="form-control me-2" placeholder="Buscar vehículos" aria-label="Buscar vehículos" />
          </form>
          <button
            id="cartButton"
            class="btn btn-outline-light position-relative ms-2"
            data-bs-toggle="modal"
            data-bs-target="#cartModal"
            aria-label="Abrir carrito de compras"
          >
            <i class="fas fa-shopping-cart"></i>
            <span id="cartCount" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" aria-live="polite" aria-atomic="true">0</span>
          </button>
        </div>
      </div>
    </nav>
    <div class="header-bg-image" aria-hidden="true"></div>
  </header>

  <main class="container mt-5 pt-5" role="main">
    <!-- Inicio -->
    <section id="inicio" class="mb-5 text-center">
      <h1>Bienvenido a GarageOnline</h1>
      <p>Compra los mejores vehículos con la mejor experiencia.</p>
    </section>

    <!-- Vehículos con filtros -->
    <section id="vehiculos" class="mb-5">
      <h2 class="mb-4 text-center">Nuestro Catálogo de Vehículos</h2>
      <div class="row mb-3">
        <div class="col-md-4">
          <select id="filterCategoria" class="form-select" aria-label="Filtrar por categoría">
            <option value="">Filtrar por categoría</option>
          </select>
        </div>
        <div class="col-md-4">
          <select id="filterMarca" class="form-select" aria-label="Filtrar por marca">
            <option value="">Filtrar por marca</option>
          </select>
        </div>
        <div class="col-md-4">
          <select id="filterTipo" class="form-select" aria-label="Filtrar por tipo">
            <option value="">Filtrar por tipo</option>
          </select>
        </div>
      </div>

      <div id="loadingSpinner" class="d-flex justify-content-center my-5" aria-live="polite" aria-busy="true"><div class="spinner-border text-primary" role="status" aria-hidden="true"></div><span class="visually-hidden">Cargando...</span></div>

      <div class="row" id="productsContainer" aria-live="polite" aria-atomic="true"></div>
    </section>

    <!-- Perfil usuario y favoritos -->
    <section id="perfil" class="mb-5">
      <h2 class="mb-4 text-center">Perfil de Usuario y Favoritos</h2>
      <div id="userProfile" class="mb-3 text-center">
        <p><strong>Usuario:</strong> <span id="userNameDisplay">Invitado</span></p>
        <button id="loginBtn" class="btn btn-primary mb-3" aria-label="Iniciar sesión">Iniciar Sesión</button>
        <button id="logoutBtn" class="btn btn-danger mb-3 d-none" aria-label="Cerrar sesión">Cerrar Sesión</button>
      </div>
      <h3>Vehículos Favoritos</h3>
      <div id="favoritesContainer" class="row"></div>
    </section>

    <!-- Contacto con mapa -->
    <section id="contacto" class="mb-5">
      <h2 class="mb-4 text-center">Contacto</h2>
      <form id="contactForm" class="mb-4" aria-label="Formulario de contacto">
        <div class="mb-3">
          <label for="contactName" class="form-label">Nombre</label>
          <input type="text" id="contactName" class="form-control" required />
        </div>
        <div class="mb-3">
          <label for="contactEmail" class="form-label">Correo electrónico</label>
          <input type="email" id="contactEmail" class="form-control" required />
        </div>
        <div class="mb-3">
          <label for="contactMessage" class="form-label">Mensaje</label>
          <textarea id="contactMessage" class="form-control" rows="3" required></textarea>
        </div>
        <button class="btn btn-primary" type="submit">Enviar</button>
      </form>
      <div id="map" style="height: 400px; border-radius: 5px;"></div>
    </section>
  </main>

  <footer class="bg-dark text-white text-center py-3">
    <small>&copy; 2025 GarageOnline. Todos los derechos reservados.</small>
  </footer>

  <!-- Modales -->

  <!-- Modal Cantidad -->
  <div class="modal fade" id="quantityModal" tabindex="-1" aria-labelledby="quantityModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="quantityModalLabel">Selecciona la cantidad</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
          <label for="quantityInput" class="form-label">Cantidad:</label>
          <input type="number" id="quantityInput" class="form-control" min="1" value="1" />
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button class="btn btn-primary" id="addToCartBtn">Añadir al Carrito</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Carrito -->
  <div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="cartModalLabel">Carrito de Compras</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body" id="cartItems"></div>
        <div class="modal-footer d-flex justify-content-between align-items-center">
          <strong>Total: $<span id="cartTotal">0</span></strong>
          <div>
            <button class="btn btn-secondary me-2" data-bs-dismiss="modal">Seguir viendo vehículos</button>
            <button class="btn btn-success" id="checkoutBtn">Pagar</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Pago -->
  <div class="modal fade" id="paymentModal" tabindex="-1" aria-labelledby="paymentModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <form class="modal-content" id="paymentForm" novalidate>
        <div class="modal-header">
          <h5 class="modal-title" id="paymentModalLabel">Formulario de Pago</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="customerName" class="form-label">Nombre completo</label>
            <input type="text" class="form-control" id="customerName" required />
          </div>
          <div class="mb-3">
            <label for="cardNumber" class="form-label">Número de tarjeta</label>
            <input type="text" class="form-control" id="cardNumber" pattern="\d{13,19}" maxlength="19" placeholder="Solo números" required />
          </div>
          <div class="mb-3">
            <label for="expiryDate" class="form-label">Fecha de expiración</label>
            <input type="month" class="form-control" id="expiryDate" required />
          </div>
          <div class="mb-3">
            <label for="cvc" class="form-label">Código CVC</label>
            <input type="text" class="form-control" id="cvc" pattern="\d{3,4}" maxlength="4" placeholder="123" required />
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="submit" class="btn btn-primary" id="processPaymentBtn">Procesar Pago</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Detalle Vehículo con galería -->
  <div class="modal fade" id="vehicleDetailModal" tabindex="-1" aria-labelledby="vehicleDetailModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered" style="max-width:900px;">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="vehicleDetailModalLabel">Detalle del Vehículo</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
          <div id="gallery" class="mb-3 d-flex justify-content-center gap-2 flex-wrap" aria-label="Galería de imágenes"></div>
          <ul id="vehicleDetailList" class="list-group" aria-label="Detalles del vehículo"></ul>
          <button class="btn btn-primary mt-3" id="detailAddToCartBtn">Añadir al Carrito</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap 5 Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Custom JS -->
  <script src="script.js" defer></script>
</body>S
</html>
